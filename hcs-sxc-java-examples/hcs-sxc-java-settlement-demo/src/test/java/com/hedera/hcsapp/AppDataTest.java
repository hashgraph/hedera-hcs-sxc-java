package com.hedera.hcsapp;

import static org.junit.jupiter.api.Assertions.*;

import org.junit.jupiter.api.Test;

import com.hedera.hcs.sxc.utils.StringUtils;

public class AppDataTest {    
    
    @Test
    public void testInstantiation() throws Exception {
        AppData appData = new AppData(0, "./src/test/resources/config.yaml", "./src/test/resources/dotenv.sample", "./src/test/resources/docker-compose.yml");
        assertEquals(4, appData.getAppClients().size());
        assertEquals(0, appData.getAppId());
        assertEquals("302a300506032b6570032100bcabbb31c4c6418ea323e02dd46c060f82936141b5d2d2a1da89e59e1267ab6b", appData.getPublicKey());
        assertEquals(0, appData.getTopicIndex());
        assertEquals("Alice", appData.getUserName());
        assertEquals(8081, appData.getWebPort());
        assertNotNull(appData.getHCSCore());
        byte[] encKey = StringUtils.hexStringToByteArray("308204be020100300d06092a864886f70d0101010500048204a8308204a40201000282010100a94b434eebd59943852ce31caf956dbe26f87a110d98b3a5f81eae29869ad2bc279e639211d1d3da93e79bdab2966036e5dfb058e6f510afc5bfb41aa71a5a261aa8c679a5cd5c653afb719c86d58e84f402ee13e5b75f607389822620a3a13b2f6829f3b371442646ff680aa71672498fe505b261dab94db0e8944894c5197759714e882330592e51120687573de19f6043afdc71c7b21f9f46f13ac99cd923f4a533a92de5a9d85fc6080d54b7bbbc4368521d28f52992dcb25bd57f58a8a66965cea3a65829aca60c2967328c706f0848eee008dd966f6457d4500d470a16b93ee2139fc8cc5e84efaf65bc2f45d2d183b97bf1913b490a5b85cc81c6fd2f02030100010282010011147ad1f791314952a258b7882f7746fbff8db132c1f93e016e76fbd18cc53e1e7128729041af321a41ffc36cc92723e2c552b1657bcc172fc84b8f74d47fcbe05caec98f24ccf199a5ccac921df1a710474b65ce8355a811800a1576ad8b92c111ad49dd0ccc67603a5c70d6b2b90d1aeb6c4bb6fbae3e5c5edab707eb6aca28ef950f7f95c5b35a78b0b0834cc1fb0f69bb9ac7c7723c11f9cb3c001fb334cc48336ab5c5576ad8a69a966e1c05c1e30f9312ee1ba4faf5270f2b26949b77d05e35bcf4d6c07b2730b30172546b4a20aab8eeb453c298d4b770eaa0e7332b70eca7bf260fd6037917b9e1ef73dacad1a033b8e006c97dee1c9aeb0b2e322102818100fe205d182097cc614122da17afa17c539c2b228dda37e456eed6c7e02af7fa4c1c79c742655a49108b418aa21fc968af5c2e0f7e2bebf447a524de3c6b39fa4a36f0f61630ba78a11131c4c40b01bb9d7453219a6b6c6e08b67756c1c033c1226832d4fa2296b0a9289a3615ab6edebe2b2eaaafcb701d82019fed2b511da45502818100aa8ac98445ea45846bece20d500f6a1a9e46e5687aab729592f0cfc50a4a4c297b0ddaddad70b1c531d9141133498c4741ecbe1c3b80f53b5672d72e9d7fb489e3dbe861afb418bbfdb4acb93fc8bf18aa3a808e5ae84b60f9c0adcb8f224df67b2affc9d0dd6436ddd60e3bb9ccdc36b4769cc57fcfe7dadf7071c559307f7302818006dc06c744f1f4015809c1cb4be15702c6bf5f5266e68552576612c51943d24cc5a3ffdde9f072f2705fd78722c683fddfc61a82f45a8d2075f3b5cff9b0f9f190e4163069264f65419a8f4e1f61ef9783714f01e50e6b35eefeefa791319470025204efaf8953c16d282477974609db263d3f3c398890335729e2f3fd5f88750281810099c1fd83cb4137a1f768203a9e76f753be65ef096ea7caec3e09ed591a38f847e1d11106120c6bca7d71d91cd4dfb7a0bb384602d04729527153a2dc3d55d9210515cc82de560282e36f94d684426ac04321f1abe71c4e71c55b4996209b6e2d0ec92acafb0bd00183aa2d34fe044c7ae9e392dea1a881c29cf7152c3788792f02818100882706aec4bb94cd5774c4f50fdf2c0618e81247cb47afa5a46fb4e602c4c7dde6d2cc8311411f23e51d735588548e5fc9e516be7980d18f068c9a4b40406f217fc6d4c6d159b0c119880c6735980435d15b7def2377f6472e1ee3c353bd327756c537e03519603b30580c1159fb4f1206c5ffd251046b9b50c3882dd8fec967");
        assertArrayEquals(encKey , appData.getHCSCore().getMessageEncryptionKey());
    }
}
